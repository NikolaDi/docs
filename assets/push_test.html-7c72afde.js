import{_ as n}from"./plugin-vue_export-helper-c27b6911.js";import{r as t,o as r,c as p,a as e,d as a,b as l,e as i}from"./app-5e987558.js";const c={},o=i(`<h2 id="推流测试" tabindex="-1"><a class="header-anchor" href="#推流测试" aria-hidden="true">#</a> 推流测试</h2><p>ZLMediaKit支持rtsp/rtmp/rtp推流，一般通常使用obs/ffmpeg推流测试，其中FFmpeg推流命令支持以下：</p><ul><li>1、使用rtsp方式推流</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># h264推流</span>
ffmpeg <span class="token parameter variable">-re</span> <span class="token parameter variable">-i</span> <span class="token string">&quot;/path/to/test.mp4&quot;</span> <span class="token parameter variable">-vcodec</span> h264 <span class="token parameter variable">-acodec</span> aac <span class="token parameter variable">-f</span> rtsp <span class="token parameter variable">-rtsp_transport</span> tcp rtsp://127.0.0.1/live/test
<span class="token comment"># h265推流</span>
ffmpeg <span class="token parameter variable">-re</span> <span class="token parameter variable">-i</span> <span class="token string">&quot;/path/to/test.mp4&quot;</span> <span class="token parameter variable">-vcodec</span> h265 <span class="token parameter variable">-acodec</span> aac <span class="token parameter variable">-f</span> rtsp <span class="token parameter variable">-rtsp_transport</span> tcp rtsp://127.0.0.1/live/test
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>2、使用rtmp方式推流</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#如果未安装FFmpeg，你也可以用obs推流</span>
ffmpeg <span class="token parameter variable">-re</span> <span class="token parameter variable">-i</span> <span class="token string">&quot;/path/to/test.mp4&quot;</span> <span class="token parameter variable">-vcodec</span> h264 <span class="token parameter variable">-acodec</span> aac <span class="token parameter variable">-f</span> flv rtmp://127.0.0.1/live/test
<span class="token comment"># RTMP标准不支持H265,但是国内有自行扩展的，如果你想让FFmpeg支持RTMP-H265,请按照此文章编译：https://github.com/ksvc/FFmpeg/wiki/hevcpush</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>3、使用rtp方式推流</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># h264推流</span>
ffmpeg <span class="token parameter variable">-re</span> <span class="token parameter variable">-i</span> <span class="token string">&quot;/path/to/test.mp4&quot;</span> <span class="token parameter variable">-vcodec</span> h264 <span class="token parameter variable">-acodec</span> aac <span class="token parameter variable">-f</span> rtp_mpegts rtp://127.0.0.1:10000
<span class="token comment"># h265推流</span>
ffmpeg <span class="token parameter variable">-re</span> <span class="token parameter variable">-i</span> <span class="token string">&quot;/path/to/test.mp4&quot;</span> <span class="token parameter variable">-vcodec</span> h265 <span class="token parameter variable">-acodec</span> aac <span class="token parameter variable">-f</span> rtp_mpegts rtp://127.0.0.1:10000
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="观察日志" tabindex="-1"><a class="header-anchor" href="#观察日志" aria-hidden="true">#</a> 观察日志</h2><p>如果推流成功，会打印这种日志：<br><img src="https://user-images.githubusercontent.com/11495632/78963526-5568dd00-7b2a-11ea-850b-0af7d022aa2e.png" alt="image" loading="lazy"></p><p>日志中相关字符串分别代表：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">2020</span>-04-10 <span class="token number">12</span>:51:52.331 I <span class="token operator">|</span> regist rtsp __defaultVhost__ rtp 206442D7
                                    ^           ^         ^      ^
                                  schema      vhost      app stream_id
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="播放地址" tabindex="-1"><a class="header-anchor" href="#播放地址" aria-hidden="true">#</a> 播放地址</h2>`,13),d={href:"https://github.com/xiongziliang/ZLMediaKit/wiki/%E6%92%AD%E6%94%BEurl%E8%A7%84%E5%88%99",target:"_blank",rel:"noopener noreferrer"};function m(v,b){const s=t("ExternalLinkIcon");return r(),p("div",null,[o,e("p",null,[a("请按照"),e("a",d,[a("播放url规则"),l(s)]),a("来播放上述的推流。")])])}const k=n(c,[["render",m],["__file","push_test.html.vue"]]);export{k as default};
